version: "2.0"

stories:
  - story: login user - happy path
    steps:
      - intent: greet
      - action: utter_greet
      - action: name_form
      - active_loop: name_form
      - active_loop: null
      - slot_was_set:
          - name: "firstname lastname"
      - action: validate_name_form
      - slot_was_set:
          - matched: "ok"
      - intent: affirm
      - action: login_form
      - active_loop: login_form
      - active_loop: null
      - slot_was_set:
          - username: "user1234"
          - password: "r1C@d0fdall#"
      - action: validate_login_form
      - slot_was_set:
          - is_authenticated: "ok"
          - sessionToken: ""
          - username: "user1234"
          - password: "r1C@d0fdall#"
      - checkpoint: logged_checkpoint

  - story: login user - longer path
    steps:
      - intent: greet
      - action: utter_greet
      - action: name_form
      - active_loop: name_form
      - active_loop: null
      - slot_was_set:
          - name: "firstname lastname"
      - action: validate_name_form
      - slot_was_set:
          - name: "firstname lastname"
      - intent: give_phone
      - action: know_form
      - active_loop: know_form
      - active_loop: null
      - slot_was_set:
          - dob: "1995/06/09"
          - phone: "81/297-852"
      - action: validate_know_form
      - slot_was_set:
          - dob: "1995/06/09"
          - phone: "81/297-852"
          - matched: "ok"
      - intent: affirm
      - action: login_form
      - active_loop: login_form
      - active_loop: null
      - slot_was_set:
          - username: "user1234"
          - password: "r1C@d0fdall#"
      - action: validate_login_form
      - slot_was_set:
          - is_authenticated: "ok"
          - sessionToken: "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOjEsInRva2VuSWQiOjM5NzksInBsYXRmb3JtIjoiQ09SRSIsImxvZ2luRGF0ZSI6Njc1MDkyOTgwMzg4MDQwMCwiZXhwIjoxNjA3MTcwNjgwfQ.Cb2t97JmiwqhNVmySS2_by-z332ZWU5WSKRAoO_8Iv8"
          - username: "user1234"
          - password: "r1C@d0fdall#"
      - checkpoint: logged_checkpoint

  - story: falied login user
    steps:
      - intent: greet
      - action: utter_greet
      - action: name_form
      - active_loop: name_form
      - active_loop: null
      - slot_was_set:
          - name: "firstname lastname"
      - action: validate_name_form
      - slot_was_set:
          - name: "firstname lastname"
      - intent: give_phone
      - action: know_form
      - active_loop: know_form
      - active_loop: null
      - slot_was_set:
          - dob: "1995/06/09"
          - phone: "81/297-852"
      - action: validate_know_form
      - slot_was_set:
          - dob: "1995/06/09"
          - phone: "81/297-852"
      - checkpoint: failed_checkpoint
